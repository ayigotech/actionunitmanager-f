<ion-header [translucent]="true">
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-button (click)="goBack()">
                <ion-icon slot="icon-only" name="arrow-back"></ion-icon>
            </ion-button>
        </ion-buttons>
        <ion-title>Members Management</ion-title>
        <ion-buttons slot="end">
            <ion-button (click)="loadMembers()">
                <ion-icon slot="icon-only" name="refresh"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>



<ion-content [fullscreen]="true">
    <ion-refresher slot="fixed" (ionRefresh)="refreshMembers($event)">
        <ion-refresher-content></ion-refresher-content>
    </ion-refresher>



    <div class="search-section">
        <div class="search-container">
            <div class="search-icon">
                <ion-icon name="search-outline"></ion-icon>
            </div>
            <input type="text" class="search-input" placeholder="Search members by name, phone, or class..." [(ngModel)]="searchTerm" (input)="searchMembers($event)">
        </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading && filteredMembers.length === 0" class="loading-container">
        <ion-spinner></ion-spinner>
        <p>Loading members...</p>
    </div>

    <!-- Empty State -->
    <div *ngIf="!isLoading && filteredMembers.length === 0" class="empty-state">
        <ion-icon name="people-outline" class="empty-icon"></ion-icon>
        <h3>No Members Found</h3>
        <p>Add members to your Action Unit classes</p>
    </div>



    <div *ngIf="!isLoading && filteredMembers.length > 0">
        <div class="stat-card mb-4">
            <div class="stat-icon members">
                <ion-icon name="person"></ion-icon>
            </div>
            <div class="list-header">
                <span>Members Directory</span>
                <span class="total-count">{{ filteredMembers.length }} member(s)</span>
            </div>
        </div>




        <ion-item *ngFor="let member of filteredMembers" class="member-item">
            <ion-avatar slot="start" class="input-icon">
                <ion-icon name="person-circle" size="large"></ion-icon>
            </ion-avatar>

            <ion-label (click)="viewMemberDetails(member)">
                <h2>{{ member.name }}</h2>
                <p>
                    <ion-icon name="call-outline"></ion-icon>
                    {{ member.phone }}
                </p>
                <p>
                    <ion-icon name="school"></ion-icon>
                    {{ member.className }}
                </p>
                <p>
                    <ion-icon name="calendar-outline"></ion-icon>
                    Joined: {{ member.joinDate | date:'mediumDate' }}
                </p>
                <ion-badge *ngIf="!member.isActive" color="warning">Inactive</ion-badge>
            </ion-label>

            <ion-buttons slot="end">
                <ion-button fill="clear" color="primary" (click)="editMember(member)">
                    <ion-icon name="create" slot="icon-only"></ion-icon>
                </ion-button>
                <ion-button fill="clear" color="danger" (click)="deactivateMember(member)">
                    <ion-icon name="person-remove" slot="icon-only"></ion-icon>
                </ion-button>
            </ion-buttons>
        </ion-item>
    </div>

    <!-- Fixed Action Button -->
    <button class="fixed-add-btn" shape="round" (click)="addBulkMember()">
        <ion-icon slot="icon-only" name="add"></ion-icon>
    </button>


    <!-- Fixed Action Button -->
    <button class="fixed-add-btn-2" shape="round" (click)="addMember()">
        <ion-icon slot="icon-only" name="folder-outline"></ion-icon>
    </button>

</ion-content>